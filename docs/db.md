# Database

Maybe you're a special kind of bird and need help reading models, and migrations.

So here's a dump of our database model

If you really need a visual model, download workbench. Connect to the database. And then Database > Reverse Engineer.
Now you can rearrange a bit the tables for it to be clearer.

![help is comming](https://media.giphy.com/media/fpXxIjftmkk9y/giphy.gif)

#Schema documentation

Generated by MySQL Workbench Model Documentation v1.0.0 - Copyright (c) 2015 Hieu Le

##Table: `car_types`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `name` | VARCHAR(255) | Not null, Unique |   |   |
| `description` | VARCHAR(255) |  | `NULL` |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| car_types_name_unique | `name` | UNIQUE |   |


##Table: `cars`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |
| `plate_number` | VARCHAR(255) |  | `NULL` |   |
| `brand` | VARCHAR(255) |  | `NULL` |   |
| `model` | VARCHAR(255) |  | `NULL` |   |
| `color` | VARCHAR(255) |  | `NULL` |   |
| `nb_place` | INT | Not null |   |   |
| `name` | VARCHAR(255) |  | `NULL` |   |
| `deleted_at` | TIMESTAMP |  | `NULL` |   |
| `car_type_id` | INT | Not null |   |  **foreign key** to column `id` on table `car_types`. |
| `status` | VARCHAR(255) |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| cars_car_type_id_foreign | `car_type_id` | INDEX |   |


##Table: `comments`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `content` | TEXT | Not null |   |   |
| `user_id` | INT | Not null |   |  **foreign key** to column `id` on table `users`. |
| `commentable_id` | INT | Not null |   |   |
| `commentable_type` | VARCHAR(255) | Not null |   |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| comments_user_id_foreign | `user_id` | INDEX |   |
| comments_commentable_id_commentable_type_index | `commentable_id`, `commentable_type` | INDEX |   |


##Table: `groups`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `color` | VARCHAR(255) | Not null |   |   |
| `name` | VARCHAR(255) |  | `NULL` |   |
| `active` | TINYINT | Not null |   |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


##Table: `images`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |
| `filename` | VARCHAR(255) | Not null |   |   |
| `original` | VARCHAR(255) | Not null |   |   |
| `type` | VARCHAR(255) | Not null |   |   |
| `user_id` | INT | Not null |   |  **foreign key** to column `id` on table `users`. |
| `deleted_at` | TIMESTAMP |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| images_user_id_foreign | `user_id` | INDEX |   |


##Table: `migrations`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `migration` | VARCHAR(255) | Not null |   |   |
| `batch` | INT | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


##Table: `model_has_permissions`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `permission_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `permissions`. |
| `model_id` | INT | PRIMARY, Not null |   |   |
| `model_type` | VARCHAR(255) | PRIMARY, Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `permission_id`, `model_id`, `model_type` | PRIMARY |   |
| model_has_permissions_model_id_model_type_index | `model_id`, `model_type` | INDEX |   |


##Table: `model_has_roles`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `role_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `roles`. |
| `model_id` | INT | PRIMARY, Not null |   |   |
| `model_type` | VARCHAR(255) | PRIMARY, Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `role_id`, `model_id`, `model_type` | PRIMARY |   |
| model_has_roles_model_id_model_type_index | `model_id`, `model_type` | INDEX |   |


##Table: `password_resets`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `email` | VARCHAR(255) | Not null |   |   |
| `token` | VARCHAR(255) | Not null |   |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| password_resets_email_index | `email` | INDEX |   |
| password_resets_token_index | `token` | INDEX |   |


##Table: `permissions`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `name` | VARCHAR(255) | Not null |   |   |
| `guard_name` | VARCHAR(255) | Not null |   |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


##Table: `role_has_permissions`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `permission_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `permissions`. |
| `role_id` | INT | PRIMARY, Not null |   |  **foreign key** to column `id` on table `roles`. |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `permission_id`, `role_id` | PRIMARY |   |
| role_has_permissions_role_id_foreign | `role_id` | INDEX |   |


##Table: `roles`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `name` | VARCHAR(255) | Not null |   |   |
| `guard_name` | VARCHAR(255) | Not null |   |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


##Table: `run_drivers`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `car_id` | INT |  | `NULL` |  **foreign key** to column `id` on table `cars`. |
| `user_id` | INT |  | `NULL` |  **foreign key** to column `id` on table `users`. |
| `run_id` | INT | Not null |   |  **foreign key** to column `id` on table `runs`. |
| `car_type_id` | INT |  | `NULL` |  **foreign key** to column `id` on table `car_types`. |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |
| `deleted_at` | TIMESTAMP |  | `NULL` |   |
| `status` | VARCHAR(255) |  | `NULL` |   |
| `started_at` | DATETIME |  | `NULL` |   |
| `ended_at` | DATETIME |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| run_drivers_car_id_foreign | `car_id` | INDEX |   |
| run_drivers_user_id_foreign | `user_id` | INDEX |   |
| run_drivers_run_id_foreign | `run_id` | INDEX |   |
| run_drivers_car_type_id_foreign | `car_type_id` | INDEX |   |


##Table: `run_waypoint`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `waypoint_id` | INT | Not null |   |  **foreign key** to column `id` on table `waypoints`. |
| `run_id` | INT | Not null |   |  **foreign key** to column `id` on table `runs`. |
| `order` | INT | Not null |   | Used to define the order of a waypoint in a run |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| run_waypoint_waypoint_id_foreign | `waypoint_id` | INDEX |   |
| run_waypoint_run_id_foreign | `run_id` | INDEX |   |


##Table: `runs`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `started_at` | DATETIME |  | `NULL` |   |
| `ended_at` | DATETIME |  | `NULL` |   |
| `planned_at` | DATETIME |  | `NULL` |   |
| `nb_passenger` | INT | Not null | `'0'` |   |
| `name` | VARCHAR(255) | Not null |   |   |
| `note` | VARCHAR(255) |  | `NULL` |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |
| `deleted_at` | TIMESTAMP |  | `NULL` |   |
| `status` | VARCHAR(255) |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


##Table: `schedule_groups`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `group_id` | INT | Not null |   |  **foreign key** to column `id` on table `groups`. |
| `start_time` | DATETIME | Not null |   |   |
| `end_time` | DATETIME | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| schedule_groups_group_id_foreign | `group_id` | INDEX |   |


##Table: `settings`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `key` | VARCHAR(255) | Not null, Unique |   |   |
| `value` | VARCHAR(2048) | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| settings_key_unique | `key` | UNIQUE |   |


##Table: `users`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `firstname` | VARCHAR(255) | Not null |   |   |
| `lastname` | VARCHAR(255) | Not null |   |   |
| `name` | VARCHAR(255) |  | `NULL` |   |
| `email` | VARCHAR(255) | Not null, Unique |   |   |
| `password` | VARCHAR(255) | Not null |   |   |
| `phone_number` | VARCHAR(255) |  | `NULL` |   |
| `sex` | TINYINT |  | `NULL` |   |
| `remember_token` | VARCHAR(100) |  | `NULL` |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |
| `group_id` | INT |  | `NULL` |  **foreign key** to column `id` on table `groups`. |
| `status` | VARCHAR(255) |  | `NULL` |   |
| `accesstoken` | VARCHAR(255) | Not null, Unique |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| users_email_unique | `email` | UNIQUE |   |
| users_accesstoken_unique | `accesstoken` | UNIQUE |   |
| users_group_id_foreign | `group_id` | INDEX |   |


##Table: `waypoints`

###Description: 



###Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `geo` | LONGTEXT |  | `NULL` |   |
| `latlng` | LONGTEXT |  | `NULL` |   |
| `name` | VARCHAR(255) | Not null |   |   |
| `created_at` | TIMESTAMP |  | `NULL` |   |
| `updated_at` | TIMESTAMP |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


